<link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<body class="no-backdrop"></body>
<style>
    .backdrop{
        width: 100%;
        height: 100%;
        background-color: #0000004a;
        z-index: 1000;
    }
    .down{
        position: absolute;
        width: 400px;
        height: 80px;
        background: #139a52;
        z-index: 3;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        text-align: center;
        vertical-align: middle;
        border-radius: 2px;
    }
    #down{
        font: bold;
        font-size: 4rem;
    }
    .frm{
        position: relative;
        display: inline-block;
    }
</style>
<center>
    <div class="no-down">
        <p id="down"></p>
    </div>
</center>
<div class="row mt-5">
    <div class="col-md-5 m-auto">
        <div class="card card-body">
            <style type="text/css">
                .inputGroup {
                    background-color: #E4E4E4;
                    display: block;
                    margin: 10px 0;
                    position: relative;
                }

                .inputGroup label {
                    padding: 12px 30px;
                    width: 100%;
                    display: block;
                    text-align: left;
                    color: #3C454C;
                    cursor: pointer;
                    position: relative;
                    z-index: 2;
                    transition: color 200ms ease-in;
                    overflow: hidden;
                }

                .inputGroup label:before {
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    content: '';
                    background-color: #48ba06;

                    position: absolute;
                    left: 50%;
                    top: 50%;
                    transform: translate(-50%, -50%) scale3d(1, 1, 1);
                    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
                    opacity: 0;
                    z-index: -1;
                }

                .inputGroup label:after {
                    width: 32px;
                    height: 32px;
                    content: '';
                    border: 2px solid #D1D7DC;
                    background-color: #fff;
                    background-image: url("data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.414 11L4 12.414l5.414 5.414L20.828 6.414 19.414 5l-10 10z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E ");
                    background-repeat: no-repeat;
                    background-position: 2px 3px;
                    border-radius: 50%;
                    z-index: 2;
                    position: absolute;
                    right: 30px;
                    top: 50%;
                    transform: translateY(-50%);
                    cursor: pointer;
                    transition: all 200ms ease-in;
                }

                .inputGroup input:checked~label {
                    color: #fff;
                }

                .inputGroup input:checked~label:before {
                    transform: translate(-50%, -50%) scale3d(56, 56, 1);
                    opacity: 1;
                }

                .inputGroup input:checked~label:after {
                    background-color: #54E000;
                    border-color: #54E0C7;
                }

                .inputGroup input {
                    width: 32px;
                    height: 32px;
                    order: 1;
                    z-index: 2;
                    position: absolute;
                    right: 30px;
                    top: 50%;
                    transform: translateY(-50%);
                    cursor: pointer;
                    visibility: hidden;
                }

                .form {
                    padding: 0 16px;
                    max-width: 550px;
                    margin: 50px auto;
                    font-size: 18px;
                    font-weight: 600;
                    line-height: 36px;
                }

                body {
                    background-color: #54E0C7;
                    font-family: 'Fira Sans', sans-serif;
                }

                *,
                *::before,
                *::after {
                    box-sizing: inherit;
                }

                html {
                    box-sizing: border-box;
                }

                code {
                    background-color: #9AA3AC;
                    padding: 0 8px;

                    <style type="text/css">
    
	.modal-confirm {		
		color: #636363;
		width: 400px;
	}
	.modal-confirm .modal-content {
		padding: 20px;
		border-radius: 5px;
		border: none;
        text-align: center;
		font-size: 14px;
	}
	.modal-confirm .modal-header {
		border-bottom: none;   
        position: relative;
	}
	.modal-confirm h4 {
		text-align: center;
		font-size: 26px;
		margin: 30px 0 -10px;
	}
	.modal-confirm .close {
        position: absolute;
		top: -5px;
		right: -2px;
	}
	.modal-confirm .modal-body {
		color: #999;
	}
	.modal-confirm .modal-footer {
		border: none;
		text-align: center;		
		border-radius: 5px;
		font-size: 13px;
		padding: 10px 15px 25px;
	}
	.modal-confirm .modal-footer a {
		color: #999;
	}		
	.modal-confirm .icon-box {
		width: 80px;
		height: 80px;
		margin: 0 auto;
		border-radius: 50%;
		z-index: 9;
		text-align: center;
		border: 3px solid #f15e5e;
	}
	.modal-confirm .icon-box i {
		color: #f15e5e;
		font-size: 46px;
		display: inline-block;
		margin-top: 13px;
	}
    .modal-confirm .btn {
        color: #fff;
        border-radius: 4px;
		background: #60c7c1;
		text-decoration: none;
		transition: all 0.4s;
        line-height: normal;
		min-width: 120px;
        border: none;
		min-height: 40px;
		border-radius: 3px;
		margin: 0 5px;
		outline: none !important;
    }
	.modal-confirm .btn-info {
        background: #c1c1c1;
    }
    .modal-confirm .btn-info:hover, .modal-confirm .btn-info:focus {
        background: #a8a8a8;
    }
    .modal-confirm .btn-danger {
        background: #f15e5e;
    }
    .modal-confirm .btn-danger:hover, .modal-confirm .btn-danger:focus {
        background: #ee3535;
    }
	.trigger-btn {
		display: inline-block;
		margin: 100px auto;
	}
</style>
                
            </style>
            <% if(message) { %>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <%= message %>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <% } %>
            <div>
            <form action="users/logout" method="GET">
                <button type="submit" class="btn btn-secondary">Logout</button><b class="btn btn-warning"><%= email %> </b>
            </form>
            <form action="/locker" method="POST">
                <h1>Select file which you want to download or delete</h1>
                
                <% for(i=0;i<n;i++) { %>
                <div class="inputGroup">
                    <input id="<%= i %>" name="name" type="radio" class="hii" onclick="fn1()"  value="<%= file[i] %>" />
                    <label for="<%= i %>"><%= file[i] %></label>
                </div>
                <% } %> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                 <button id="download" onclick="downloading()" type="submit"  disabled class="btn btn-primary">download</button> 
                 
                 &nbsp;&nbsp;
                <a href="#myModal" class="trigger-btn" data-toggle="modal"><button id="delete" disabled class="btn btn-danger">Delete</button> </a>
            </form>
            <form action="/view" method="POST" class="frm">
                <input type="hidden" id="i1" name="name"  />
                <button id="view" disabled onclick="loading()" class="btn btn-success" type="submit">View</button>
            </form>
            <p class="lead mt-4">Upload a Document? <a href="/upload">Upload Document</a></p>
            <p class="lead mt-4">Change password? <a href="/change">Change password</a></p>
        </div>
        
    </div>
</div>

<script>
    function fn1(){
        let c=false;
        for(i=0;i<<%= n %>;i++){
            c=document.getElementById(i).checked
            if(c) {
                document.getElementById("delete").disabled=false
                document.getElementById("download").disabled=false
                document.getElementById("view").disabled=false
                fn2(i)
            }
        }                        
    }

    function downloading(){
        document.getElementById("down").innerHTML="Downloading..."
        document.querySelector(".no-down").className="down"
        document.querySelector(".no-backdrop").className="backdrop"
        setTimeout(()=>{
            document.getElementById("down").innerHTML=""
        document.querySelector(".down").className="no-down"
        document.querySelector(".backdrop").className="no-backdrop"
        },3000)
    }

    function loading(){
        document.getElementById("down").innerHTML="Loading..."
        document.querySelector(".no-down").className="down"
        document.querySelector(".no-backdrop").className="backdrop"
        setTimeout(()=>{
            document.getElementById("down").innerHTML=""
        document.querySelector(".down").className="no-down"
        document.querySelector(".backdrop").className="no-backdrop"
        },3000)
    }
</script>
  <div id="myModal" class="modal fade" id="ab">
	<div class="modal-dialog modal-confirm">
		<div class="modal-content">
			<div class="modal-header">
				<div class="icon-box">
					<i class="material-icons">&#xE5CD;</i>
				</div>				
				<h4 class="modal-title">Are you sure?</h4>	
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			</div>
			<div class="modal-body">
				<p id="p1" ></p>
            </div>
			<div class="modal-footer">
				<form action="/remove" method="POST">
                    <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                    
                    <input type="hidden" name="name" id="name" />
                <button type="Submit" class="btn btn-danger">Delete</button>
                <script>
                    function fn2(id){
                        document.getElementById("i1").value=document.getElementById(id).value
                        document.getElementById("name").value=document.getElementById(id).value
                        document.getElementById("p1").innerHTML=`Do you really want to Delete ${document.getElementById("name").value}`
                    }
                </script>
                </form>
                
			</div>
		</div>
	</div>
</div>